# 海中浮遊物カウンター (Web版)

これは、動画ファイルから海中の浮遊物の量を概算するためのWebアプリケーションです。Python製の[オリジナル版](https://github.com/kuronos357/marine-object-counter)を、クライアントサイドで動作するWebアプリとしてReactとTypeScriptを用いて再実装したものです。

サーバーへの動画アップロードが不要なため、大きな動画ファイルでもプライバシーと速度を保ちながら処理できます。
[リンク](https://marine-object-counter-web.vercel.app/)
## 主な機能

- ブラウザ完結型の動画処理
- 深度に応じたフレームの自動抽出と解析
- 白ピクセル率（浮遊物の概算値）の計算
- 処理結果のグラフ表示
- 解析データのCSV形式でのダウンロード
- **詳細設定**: サンプリング間隔、二値化の閾値、トリム値をUIから調整可能
- **フレームビューア**: 解析後の動画から、指定した地点の「元画像」と「二値化画像」を並べて表示

## 技術スタック

- [React](https://react.dev/) - UIライブラリ
- [TypeScript](https://www.typescriptlang.org/) - JavaScriptへの型付け
- [Vite](https://vitejs.dev/) - 開発サーバーとビルドツール
- [OpenCV.js](https://docs.opencv.org/4.x/d5/d10/tutorial_js_root.html) - 画像処理
- [Recharts](https://recharts.org/) - グラフ描画
- [React-CSV](https://github.com/react-csv/react-csv) - CSVダウンロード

## セットアップと実行方法

### 1. 前提条件

- [Node.js](https://nodejs.org/) (v18以降を推奨) がインストールされていること。

### 2. 依存関係のインストール

プロジェクトのルートディレクトリで、以下のコマンドを実行します。

```bash
npm install
```

### 3. 開発サーバーの起動

依存関係のインストール後、以下のコマンドで開発サーバーを起動します。

```bash
npm run dev
```

ターミナルに表示されたローカルURL（例: `http://localhost:5173`）をブラウザで開くと、アプリケーションにアクセスできます。

## 使い方

1.  **動画ファイルを選択**: 「動画ファイルを選択」ボタンを押し、解析したい動画ファイルを選びます。
2.  **詳細設定（任意）**: 「詳細設定」セクションを開き、以下の値を調整します。
    - **総深度(m)**: 解析対象の動画がカバーする全体の深さ。
    - **サンプリング間隔(m)**: 何メートルおきにデータを取得するかの間隔。
    - **二値化の閾値**: 画像を白黒に分ける際の基準値（0-255）。
    - **トリム値**: 計算された白ピクセル数に加減算する調整値。
3.  **動画を処理**: 「動画を処理」ボタンを押すと、ブラウザ上で解析が始まります。
4.  **結果の確認**: 処理が完了すると、深度ごとの白ピクセル率を示したグラフが表示されます。
5.  **CSVをダウンロード**: グラフの下にあるリンクから、解析データをCSVファイルとして保存できます。
6.  **フレームの表示**: 「フレームビューア」セクションで、表示方法（深度、フレーム番号、秒数）を選択し、値を入力して「画像を表示」ボタンを押すと、その地点の画像が表示されます。
